<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3. Using resource files • jaysire</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="3. Using resource files">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jaysire</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/jaysire01.html">1. Getting started</a>
    </li>
    <li>
      <a href="../articles/jaysire02.html">2. Randomisation, repetition and variables</a>
    </li>
    <li>
      <a href="../articles/jaysire03.html">3. Using resource files</a>
    </li>
    <li>
      <a href="../articles/jaysire04.html">4. Image, video and audio files</a>
    </li>
    <li>
      <a href="../articles/jaysire05.html">5. Buttons, key presses and sliders</a>
    </li>
    <li>
      <a href="../articles/jaysire06.html">6. Survey pages</a>
    </li>
    <li>
      <a href="../articles/jaysire07.html">7. Loops and branches</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Gallery
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/experiment01.html">1. Choice RT task</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/djnavarro/jaysire">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>3. Using resource files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/djnavarro/jaysire/blob/master/vignettes/jaysire03.Rmd"><code>vignettes/jaysire03.Rmd</code></a></small>
      <div class="hidden name"><code>jaysire03.Rmd</code></div>

    </div>

    
    
<p>In the <a href="jaysire01.html">first</a> and <a href="jaysire02.html">second</a> articles, the stimulus materials were simple text, and so I didn’t need to worry about specifying image files or anything like that. This is not the norm, of course: most behavioural experiments include images, audio or video in some form or another. The way we handle this in jaysire is by referring to <em>resource</em> files that are stored somewhere else on your computer, but will be copied (not moved - the original files are untouched) into the experiment folder when the <code><a href="../reference/build_experiment.html">build_experiment()</a></code> function is called. In this article I’ll walk you through the process. For the sake of simplicity, I won’t bother with instruction trials this time</p>
<div id="the-resource-folder" class="section level2">
<h2 class="hasAnchor">
<a href="#the-resource-folder" class="anchor"></a>The resource folder</h2>
<p>The way jaysire works is to assume that there is a folder on your computer that contains all the files that your experiment needs to use. The current implementation in jaysire is a bit crude, so this needs to be a flat folder (i.e., it cannot contain any subfolders). Normally, this folder would be located somewhere sensible, but for the purposes of this example I’ll create one in a temporary folder:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(jaysire)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co"># specify the path</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">resource_folder &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"images"</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">resource_folder</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt; [1] "/tmp/RtmpjBiqy2/images"</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co"># create the empty folder if necessary</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span>(resource_folder)) {</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">  <span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(resource_folder)</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">}</a></code></pre></div>
<p>Okay, so now we have a resource folder. Note that this folder is not part of our experiment (it can’t be, since we haven’t created the experiment yet!) it’s somewhere else.</p>
</div>
<div id="creating-resources-in-r" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-resources-in-r" class="anchor"></a>Creating resources in R</h2>
<p>The next step is to place resources in the folder. One way to do this is just to copy and paste existing files from your computer, but because we’re in R we might as well use R to create some images for us to use in our experiment.</p>
<p>The experimental task that we’re going to design is one that asks people to look at images containing red and blue dots and judge whether there are more red dots or more blue dots in the image. To do this, here’s a function that will generate an image file that plots <code>nred</code> red dots and <code>nblue</code> blue dots, randomly located.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tibble)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">make_image &lt;-<span class="st"> </span><span class="cf">function</span>(nblue, nred, filename) {</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  points &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">    <span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(nblue <span class="op">+</span><span class="st"> </span>nred),</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(nblue <span class="op">+</span><span class="st"> </span>nred),</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"blue"</span>, nblue), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"red"</span>, nred))</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">  )</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">  img &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(points, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x, y, <span class="dt">color =</span> col)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="dt">size =</span> <span class="dv">4</span>, <span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span>()</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">  <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span>(filename, img, <span class="dt">width =</span> <span class="dv">4</span>, <span class="dt">height =</span> <span class="dv">4</span>, <span class="dt">dpi =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">}</a></code></pre></div>
<p>Now that we have our <code>make_image()</code> function, let’s create stimuli that vary in the number of red dots and the number of blue dots! To do that, the first step is to specify how many red and blue dots will be in each image:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">nblue &lt;-<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">nred &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">image_files &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"stimulus"</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">8</span>, <span class="st">".png"</span>)</a></code></pre></div>
<p>Now we create the files:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="cf">for</span>(s <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">8</span>) {</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="kw">make_image</span>(</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">    <span class="dt">nblue =</span> nblue[s], </a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="dt">nred =</span> nred[s], </a>
<a class="sourceLine" id="cb4-5" data-line-number="5">    <span class="dt">filename =</span> <span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(resource_folder, image_files[s])</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">}</a></code></pre></div>
<p>Check that it worked:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(resource_folder)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; [1] "stimulus1.png" "stimulus2.png" "stimulus3.png" "stimulus4.png"</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; [5] "stimulus5.png" "stimulus6.png" "stimulus7.png" "stimulus8.png"</span></a></code></pre></div>
<p>Okay, so now we have our stimulus materials, so we’re ready to start incorporating them into an experiment! However, before we do so, there’s something important to note. At this point we have two separate variables <code>resource_folder</code> that specifies the path to the resource folder, and <code>image_files</code> which specifies the names of the images that are contained within that folder. That is:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">resource_folder</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; [1] "/tmp/RtmpjBiqy2/images"</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">image_files</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; [1] "stimulus1.png" "stimulus2.png" "stimulus3.png" "stimulus4.png"</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; [5] "stimulus5.png" "stimulus6.png" "stimulus7.png" "stimulus8.png"</span></a></code></pre></div>
<p>These are the two variables we’ll need to use when building our experiment.</p>
</div>
<div id="the-trial-template" class="section level2">
<h2 class="hasAnchor">
<a href="#the-trial-template" class="anchor"></a>The trial template</h2>
<p>Because we have several different stimuli to incorprate into the experiment, what we’ll do is specify a template just as we did in the <a href="jaysire02.html">second</a> tutorial article. However, for our new experiment, the stimulus is an image rather than text, so we’ll use the <code><a href="../reference/trial_image_button_response.html">trial_image_button_response()</a></code> function this time.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">trial_template &lt;-<span class="st"> </span><span class="kw"><a href="../reference/trial_image_button_response.html">trial_image_button_response</a></span>(</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">  <span class="dt">stimulus =</span> <span class="kw"><a href="../reference/insert_variable.html">insert_variable</a></span>(<span class="dt">name =</span> <span class="st">"my_stimulus"</span>),</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">  <span class="dt">stimulus_height =</span> <span class="dv">400</span>,</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">  <span class="dt">stimulus_width =</span> <span class="dv">400</span>,</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  <span class="dt">choices =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"there are more red dots"</span>, <span class="st">"there are more blue dots"</span>),</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  <span class="dt">post_trial_gap =</span> <span class="dv">1000</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">)</a></code></pre></div>
<p>Notice that again I’ve used the <code><a href="../reference/insert_variable.html">insert_variable()</a></code> function to indicate the blank space that will need to be filled in when the experiment gets built. Another thing to notice is that the function allows you to manually specify the height and the width of the image (in pixels), so I’ve done that here.</p>
</div>
<div id="using-resources-in-a-timeline" class="section level2">
<h2 class="hasAnchor">
<a href="#using-resources-in-a-timeline" class="anchor"></a>Using resources in a timeline</h2>
<p>Much like we did in the previous example, we can construct the timeline by first transforming <code>trial_template</code> into a timeline object using the <code><a href="../reference/build_timeline.html">build_timeline()</a></code> function, and then use the <code><a href="../reference/tl_add_variables.html">tl_add_variables()</a></code> function to specify the timeline variable “my_stimulus” that the template requires. The only difference between this time and the last one is that we need to use the <code><a href="../reference/insert_resource.html">insert_resource()</a></code> function so that jaysire knows that it needs to treat <code>image_files</code> as filenames. So our code looks like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">trials &lt;-<span class="st"> </span><span class="kw"><a href="../reference/build_timeline.html">build_timeline</a></span>(trial_template) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/tl_add_variables.html">tl_add_variables</a></span>(<span class="dt">my_stimulus =</span> <span class="kw"><a href="../reference/insert_resource.html">insert_resource</a></span>(image_files)) </a></code></pre></div>
<p>Of course, in a real experiment we would probably want to randomise the order in which the stimuli are presented, so it would make more sense to add an extra step like this:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">trials &lt;-<span class="st"> </span><span class="kw"><a href="../reference/build_timeline.html">build_timeline</a></span>(trial_template) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/tl_add_variables.html">tl_add_variables</a></span>(<span class="dt">my_stimulus =</span> <span class="kw"><a href="../reference/insert_resource.html">insert_resource</a></span>(image_files)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/tl_add_parameters.html">tl_add_parameters</a></span>(<span class="dt">randomize_order =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>In a complete experiment, the <code>trials</code> timeline would need to have other things added to it. We’d need some instructions at the start and a thank you message at the end. But I won’t bother with that in this case, and so we’ll pretend that <code>trials</code> is the entire timeline for the experiment.</p>
</div>
<div id="adding-the-resources-to-the-experiment-build" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-the-resources-to-the-experiment-build" class="anchor"></a>Adding the resources to the experiment build</h2>
<p>The last step is, as always, building the experiment using the <code><a href="../reference/build_experiment.html">build_experiment()</a></code> function. Again, for the purposes of the tutorial I’ll set the experiment <code>path</code> to be a temporary folder, but in real life you’d put it somewhere sensible. Here’s how I do that:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/build_experiment.html">build_experiment</a></span>(</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  <span class="dt">timeline =</span> trials,</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">  <span class="dt">path =</span> <span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"images_exp"</span>), </a>
<a class="sourceLine" id="cb10-4" data-line-number="4">  <span class="dt">resources =</span> <span class="kw"><a href="../reference/build_resources.html">build_resources</a></span>(resource_folder),</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">  <span class="dt">on_finish =</span> <span class="kw"><a href="../reference/fn_save_locally.html">fn_save_locally</a></span>()</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">)</a></code></pre></div>
<p>Notice the difference from the previous tutorials. This time around there is an extra argument called <code>resources</code>, and I’ve used the <code><a href="../reference/build_resources.html">build_resources()</a></code> function. It’s worth unpacking this a little bit. To understand what is happening here, let’s have a look at the output of the <code><a href="../reference/build_resources.html">build_resources()</a></code> function:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="../reference/build_resources.html">build_resources</a></span>(resource_folder)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; # A tibble: 8 x 4</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#&gt;   name         type  from                           to                     </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;                          &lt;chr&gt;                  </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt; 1 stimulus1.p… image /tmp/RtmpjBiqy2/images/stimul… resource/image/stimulu…</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; 2 stimulus2.p… image /tmp/RtmpjBiqy2/images/stimul… resource/image/stimulu…</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; 3 stimulus3.p… image /tmp/RtmpjBiqy2/images/stimul… resource/image/stimulu…</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt; 4 stimulus4.p… image /tmp/RtmpjBiqy2/images/stimul… resource/image/stimulu…</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; 5 stimulus5.p… image /tmp/RtmpjBiqy2/images/stimul… resource/image/stimulu…</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; 6 stimulus6.p… image /tmp/RtmpjBiqy2/images/stimul… resource/image/stimulu…</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; 7 stimulus7.p… image /tmp/RtmpjBiqy2/images/stimul… resource/image/stimulu…</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt; 8 stimulus8.p… image /tmp/RtmpjBiqy2/images/stimul… resource/image/stimulu…</span></a></code></pre></div>
<p>What the <code><a href="../reference/build_resources.html">build_resources()</a></code> function does is scan the resource folder and construct a tibble containing all the information that jaysire needs to be able to structure the experiment appropriately. The first column is just the filename, the second column is the <em>type</em> of resource (in this case, everything is an image), the third column indicates where the original file is located, and the final column indicates where copy of that file will be created.</p>
<p>This probably seems unnecessarily complicated. The reason it is structured like this is because there are different kinds of resources, and the browser needs to be given different instructions for how to handle each type. That is, the HTML code for incorporating images is different to the code for audio, video, or javascript code, and so the input to <code><a href="../reference/build_experiment.html">build_experiment()</a></code> needs to be explicit about what kind of resource each file corresponds to. By default the <code><a href="../reference/build_resources.html">build_resources()</a></code> function assumes that an <code>.mp3</code> file is audio, a <code>.png</code> file is an image, etc, but you can override the defaults if you need to. Alternatively, there’s nothing stopping you from constructing this tibble manually if you wanted to: the <code><a href="../reference/build_resources.html">build_resources()</a></code> function is just there to make life slightly less annoying.</p>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>The walkthrough in this article is a little longer than it needed to be, because I included all the code that you would use to create the image files. Strictly speaking, that’s not part of the experiment itself. Sometimes you do need to go through that process, but more often you already have the image files stored in the resource folder. If that were the case all you’d need to do is tell jaysire to copy them into the appropriate locations, and the complete code for this experiment would look like this:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(jaysire)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co"># ----------- resource information -----------</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4">resource_folder &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"images"</span>)</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">image_files &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(resource_folder)</a>
<a class="sourceLine" id="cb12-6" data-line-number="6"></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co"># ----------- trial template -----------</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">trial_template &lt;-<span class="st"> </span><span class="kw"><a href="../reference/trial_image_button_response.html">trial_image_button_response</a></span>(</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">  <span class="dt">stimulus =</span> <span class="kw"><a href="../reference/insert_variable.html">insert_variable</a></span>(<span class="dt">name =</span> <span class="st">"my_stimulus"</span>),</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">  <span class="dt">stimulus_height =</span> <span class="dv">400</span>,</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">  <span class="dt">stimulus_width =</span> <span class="dv">400</span>,</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">  <span class="dt">choices =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"there are more red dots"</span>, <span class="st">"there are more blue dots"</span>),</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">  <span class="dt">post_trial_gap =</span> <span class="dv">1000</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14">)</a>
<a class="sourceLine" id="cb12-15" data-line-number="15"></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co"># ----------- build the timeline -----------</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17">trials &lt;-<span class="st"> </span><span class="kw"><a href="../reference/build_timeline.html">build_timeline</a></span>(trial_template) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="st">  </span><span class="kw"><a href="../reference/tl_add_variables.html">tl_add_variables</a></span>(<span class="dt">my_stimulus =</span> <span class="kw"><a href="../reference/insert_resource.html">insert_resource</a></span>(image_files)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="st">  </span><span class="kw"><a href="../reference/tl_add_parameters.html">tl_add_parameters</a></span>(<span class="dt">randomize_order =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb12-20" data-line-number="20"></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co"># ----------- build the experiment -----------</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="kw"><a href="../reference/build_experiment.html">build_experiment</a></span>(</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">  <span class="dt">timeline =</span> trials,</a>
<a class="sourceLine" id="cb12-24" data-line-number="24">  <span class="dt">path =</span> <span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"images_exp"</span>), </a>
<a class="sourceLine" id="cb12-25" data-line-number="25">  <span class="dt">resources =</span> <span class="kw"><a href="../reference/build_resources.html">build_resources</a></span>(resource_folder),</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">  <span class="dt">on_finish =</span> <span class="kw"><a href="../reference/fn_save_locally.html">fn_save_locally</a></span>()</a>
<a class="sourceLine" id="cb12-27" data-line-number="27">)</a></code></pre></div>
<p>You can check out a working version of the experiment <a href="../demos/example03/experiment/index.html">here</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-resource-folder">The resource folder</a></li>
      <li><a href="#creating-resources-in-r">Creating resources in R</a></li>
      <li><a href="#the-trial-template">The trial template</a></li>
      <li><a href="#using-resources-in-a-timeline">Using resources in a timeline</a></li>
      <li><a href="#adding-the-resources-to-the-experiment-build">Adding the resources to the experiment build</a></li>
      <li><a href="#summary">Summary</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://compcogscisydney.org">Danielle Navarro</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
